{{!-- Import the header view/partial/header.handlebars--}}
{{> header}}
<div class="container animate-bottom vh">
  <div id="loader"></div>
  <div id="before-join" class="hide">
    <h2 class="text-center">Ready to join a chat?</h2>
    <p class="text-center">RTConn is truly simple video chat and screen sharing for groups.</p>
    <div class="animate-bottom mt-5">
      <div class="row">
        <div class="offset-md-2 col-md-4">
          <video id="myVideoPreview"></video>
        </div>
        <div class="col-md-3">
          <form action="" method="POST" id="joinCallForm">
            <div class="form-group">
              <label for="camera"><i class="fa fa-video"></i> Camera:</label>
              <select name="camera" id="cameras" class="form-control">
                <option value="">HP TrueVision HD</option>
                <option value="">None</option>
              </select>
            </div>
            <div class="form-group">
              <label for="mic"><i class="fas fa-microphone"></i> Audio:</label>
              <select name="mics" id="mics" class="form-control">
                <option value="">Default</option>
                <option value="">Built-in Audio Analog Stereo</option>
              </select>
            </div>
            <div class="form-group">
              <input id="joinCall" type="submit" class="btn btn-primary" value="Join Call">
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  <div class="hide" id="after-join">
    <div class="row">
      <aside class="col-md-2 bl-1">
        <div class="row">
          <div class="col-md-12 m-2">
            <button href="#" class="btn btn-outline-primary btn-block"><i class="fas fa-link"></i> Invite</button>
          </div>
          <div class="col-md-6">
            <button href="#" class="btn btn-outline-secondary btn-block"><i class="fas fa-lock"></i> Lock</button>
          </div>
          <div class="col-md-6">
            <button href="#" class="btn btn-outline-danger btn-block mb-3"><i class="fas fa-sign-in-alt"></i> Leave</button>
          </div>
        </div>
        <div id="myVideoBox" class="mb-2">
          <video id="myVideo"></video>
        </div>
        <div id="controls" class="mb-3">
          <button class="btn btn-sm"><i class="fas fa-microphone"></i></button>
          <button class="btn btn-sm"><i class="fas fa-video"></i></button>
          <button class="btn btn-sm d-none d-md-inline"><i class="fas fa-desktop"></i> Screen share</button>
        </div>
        <div id="active-users"></div>
      </aside>
      <div id="usersVideo" class="col-md-10">
        {{#each users}}
          <div class="other-users">
            <video id="{{this.id}}"></video>
          </div>
        {{/each}}
        <button id="openTextChat"role="openTextChat"><i class="fab fa-rocketchat"></i></button>

      </div>
      <aside class="col-md-3 frame hide" role="textChatBox">
        <div class="float-right">
          <button id="closeTextChat" type="button" class="close" role="closeTextChat">&times;</button>
        </div>
        <ul id="messages"></ul>
        <div class="mb-2">
          <form method="post" id="textChatForm">
            <div class="msj-rta macro">
              <div class="text text-r" style="background:whitesmoke !important">
                <input name="chat" class="mytext" placeholder="Type a message" autocomplete="off"/>
              </div>

            </div>
            <div>
              <button type="submit"><i class="fas fa-share share"></i></button>
            </div>
          </form>
        </div>
      </aside>
    </div>
  </div>

</div>

{{!-- Import the footer view/partial/footer.handlebars--}}
{{>footer}}

{{!-- Embeed custom Scipts to the main.handlebar layout--}}
{{#contentFor 'pageScripts'}}
  <script src="/socket.io/socket.io.js"></script>
  <script src="/static/js/chatPage.js"></script>
  <script src="/static/js/socket.js"></script>
  <script src="/static/js/webrtc.js"></script>
{{/contentFor}}

{{!-- Embeed custom stylesheet to the main.handlebar layout--}}
{{#contentFor 'pageStyles'}}
  <link rel="stylesheet" href="/static/css/chat.css"/>
{{/contentFor}}